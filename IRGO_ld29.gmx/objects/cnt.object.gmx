<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-99999</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.sensitivity=50;
audio_play_music(musBack,1);
global.time=0;
global.txtPause=0;
txtFade=0;
txt="";
for(i=0;i&lt;=15;i+=1)
txtStr[i]=0;
txtFade=0;
txtIndex=0;
txtTotal=0;
xx=0;
global.untrap=0;
global.zoom=-8000;
introTextIndex=0;
playerL=400;
global.shake=0;
global.debug=0;
global.pause=0;
global.plantsWatered=0;
global.cleaned=0;
global.bookcasesSorted=0;
global.currentObj=0;
global.objective[0]="Put all trash in the trash can - 0/"+string(instance_number(objPaper));
global.objective[1]="Sort all bookcases - 0/"+string(instance_number(objBookcase));
global.objective[2]="Water all plants - 0/"+string(instance_number(objPlant));
global.objective[3]="Clean the bathroom";
global.objective[4]="Go outside.";
global.cut[0]=0;
global.cut[1]=0;
scrFade=0;
objAlp=0;
objFade=-1;
global.water=0;
global.shirtNope=0;
global.lmb="";
global.rmb="";
hudAlp=0;
showedText=0;
vol=1;
global.drkSur=surface_create(room_width,room_height);
surface_set_target(global.drkSur);
draw_clear(c_black);
surface_reset_target();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>objPlayer.holding=-1;
global.pause=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.lmb="";
global.rmb="";
global.interact=0;
if (!surface_exists(global.drkSur)){
    global.drkSur=surface_create(room_width,room_height);
    surface_set_target(global.drkSur);
    draw_clear(c_black);
    surface_reset_target();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (string_count("debug",string_lower(keyboard_string))){
    if (global.debug){
        global.debug=0;
    }else{
        global.debug=1;
    }
    keyboard_string="";
}
if (mouse_check_button_pressed(mb_any) &amp;&amp; global.untrap==1){
    global.untrap=0;
    window_set_cursor(cr_none);
}
if (keyboard_check(vk_alt) &amp;&amp; keyboard_check(vk_f4)){
    game_end();
}
if (keyboard_check_pressed(vk_escape)){
    global.untrap=1;
    window_set_cursor(cr_default);
}

if (keyboard_check_pressed(ord('M'))){
    if (vol==0){
        vol=1;
        audio_master_gain(vol);
    }else{
        vol=0;
        audio_master_gain(vol);
    }
}
if (keyboard_check_pressed(ord('F'))){
    if (window_get_fullscreen()){
        window_set_fullscreen(0);
    }else{
        window_set_fullscreen(1);
    }
}
if (mouse_wheel_down() &amp;&amp; global.sensitivity&lt;200) then global.sensitivity+=5;
if (mouse_wheel_up() &amp;&amp; global.sensitivity&gt;10) then global.sensitivity-=5;
if (global.cut[1]==1){
    if (scrFade&lt;1 &amp;&amp; objPlayer.y&lt;160) then scrFade+=.010;   
}
if (global.cut[0]==1){
    if (scrFade&lt;1.5){
        scrFade+=.010;
        if (scrFade&gt;1 &amp;&amp; scrFade&lt;1.5){
            if (!audio_is_playing(sndWaterBucket)) then audio_play_sound(sndWaterBucket,0,0);
            global.hudAlp=0;
        }
    }else{
        objBucket.filled=0;
        global.cut[0]=2;
        tile_layer_delete_at(1000000,280,840);
        tile_layer_delete_at(1000000,280,880);
        tile_add(bcgTiles0,160,0,40,40,280,840,1000000);
        tile_add(bcgTiles0,160,0,40,40,280,880,1000000);
        textBox("Dammit!");
        global.objective[3]="";
        global.shirtNope=1;
    }
    
}
if (global.cut[0]==2 &amp;&amp; global.txtPause==0){
    if (scrFade&gt;0){
        scrFade-=.010;
    }else{
        if (showedText==0) then textBox("My shirt is ruined...","...and I don't have another one.","(sigh)","Oh well...","...","...let's go shopping...","...and talk to people.");
        showedText=1;
        global.pause=0;        
        if (global.txtPause==0){
            audio_play_sound(sndComplete,0,0);
            objFade=1;
            global.cut[0]=0;
        }
    }
    
}
global.objective[0]="Put all trash in the trash can: "+string(global.cleaned)+"/"+"15";
global.objective[1]="Sort all bookcases: "+string(global.bookcasesSorted)+"/"+string(instance_number(objBookcase));
global.objective[2]="Water all plants: "+string(global.plantsWatered)+"/"+string(instance_number(objPlant));
if (global.cleaned==15 &amp;&amp; global.currentObj==0 &amp;&amp; objFade==0){
    audio_play_sound(sndComplete,0,0);
    objFade=1;
    objPlayer.holding=-1;
}

if (global.bookcasesSorted==instance_number(objBookcase) &amp;&amp; global.currentObj==1 &amp;&amp; objFade==0){
    audio_play_sound(sndComplete,0,0);
    objFade=1;
    objPlayer.holding=-1;
}
if (global.plantsWatered==instance_number(objPlant) &amp;&amp; global.currentObj==2 &amp;&amp; objFade==0){
    audio_play_sound(sndComplete,0,0);
    objFade=1;
    global.pause=0;
    alarm[0]=5;    
}
if (objFade==1){
    objAlp-=.05;
    if (objAlp&lt;=0){
        global.currentObj+=1;
        objPlayer.holding=-1;
        objFade=0;
    }
}
if (global.intro==1){
    if (global.zoom&gt;=-0.5){
        global.zoom=0
        global.intro=0;
        textBox("Hello.","My name's Joel.","I rarely go outside.","I'm a big fan of underground living.","I hate people.","I don't need them.","But I love my flat.","...","It's so... perfect...","...usually.","...","...","Not today.","Someone broke in here while I was asleep, and left a huge mess behind.","I need to fix this.");
        objFade=0;
    }
    global.zoom+=abs(global.zoom)/30;
    view_xview=-400+(global.zoom*16)/2;
    view_yview=-20+(global.zoom*9)/2;
    view_wview=1280-global.zoom*16;
    view_hview=720-global.zoom*9;
}else{
    if (objFade==0 &amp;&amp; objAlp&lt;1 &amp;&amp; global.intro==0) then objAlp+=.05; 
}
xx+=.05;
surface_set_target(global.drkSur);
draw_clear(c_white);
draw_set_blend_mode(bm_subtract);
draw_circle_colour(objPlayer.x,objPlayer.y,playerL,c_white,c_black,0);
draw_set_blend_mode(bm_normal);
surface_reset_target();
var px=objPlayer.x-view_wview/2;
var py=objPlayer.y-view_hview/2;
if (view_xview&lt;px &amp;&amp; global.cut[1]==0) then view_xview+=(px-view_xview)/20+choose(-global.shake*20,global.shake*20);
if (view_xview&gt;px &amp;&amp; global.cut[1]==0) then view_xview-=(view_xview-px)/20+choose(-global.shake*20,global.shake*20);
if (view_yview&lt;py &amp;&amp; global.cut[1]==0) then view_yview+=(py-view_yview)/20+choose(-global.shake*20,global.shake*20);
if (view_yview&gt;py &amp;&amp; global.cut[1]==0) then view_yview-=(view_yview-py)/20+choose(-global.shake*20,global.shake*20);

if (global.txtPause==1){
    hudAlp-=hudAlp/20;
    if (txtFade&lt;string_length(txtStr[txtIndex])){
        if (!audio_is_playing(sndLetter)){
            audio_sound_pitch(sndLetter,random_range(.8,1.2));
            audio_play_sound(sndLetter,0,0);
        }
    }
        txtFade+=.5;
    if (keyboard_check_pressed(ord('X')) || mouse_check_button_pressed(mb_left)){
        
        if (txtFade&gt;=string_length(txtStr[txtIndex])){
            if (txtIndex&lt;txtTotal){
                txtIndex+=1;
                txtFade=0;
            }else{
                txtIndex=0;
                txtTotal=0;
                txtFade=0;
                window_mouse_set(window_get_width()/2,window_get_height()/2);
                global.txtPause=0;
            }
            exit;
        }
        if (txtFade&lt;string_length(txtStr[txtIndex]) &amp;&amp; txtFade&gt;1) then txtFade=string_length(txtStr[txtIndex]);   
    }
}else{
    if (global.intro==0 &amp;&amp; global.cut[0]==0) then hudAlp+=(1-hudAlp)/20;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (font_exists(global.gameFont)) then font_delete(global.gameFont);
if (surface_exists(global.drkSur)) then surface_free(global.drkSur);
if (background_exists(global.overlayBcg)) then background_delete(global.overlayBcg);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.intro==0){
    if (global.debug){
        draw_set_halign(fa_right);
        draw_set_valign(fa_bottom);
        draw_text_transformed_colour(display_get_gui_width()-10,display_get_gui_height()-12,"objPlayer.holding: "+string(objPlayer.holding)+"#global.pause: "+string(global.pause)+"#global.txtPause: "+string(global.txtPause)+"#global.intro: "+string(global.intro)+"#global.currentObj: "+string(global.currentObj),3,3,0,c_gray,c_gray,c_gray,c_gray,(objAlp*hudAlp)-scrFade);
        draw_text_transformed_colour(display_get_gui_width()-10,display_get_gui_height()-10,"objPlayer.holding: "+string(objPlayer.holding)+"#global.pause: "+string(global.pause)+"#global.txtPause: "+string(global.txtPause)+"#global.intro: "+string(global.intro)+"#global.currentObj: "+string(global.currentObj),3,3,0,c_white,c_white,c_white,c_white,(objAlp*hudAlp)-scrFade);    
    }
    draw_set_valign(fa_top);
    draw_set_halign(fa_right);
    draw_text_transformed_colour(display_get_gui_width()-10,12,global.objective[global.currentObj],3,3,0,c_gray,c_gray,c_gray,c_gray,(objAlp*hudAlp)-scrFade);
    draw_text_transformed_colour(display_get_gui_width()-10,10,global.objective[global.currentObj],3,3,0,c_white,c_white,c_white,c_white,(objAlp*hudAlp)-scrFade);
    draw_set_halign(fa_left);
    draw_set_valign(fa_bottom);
    var finalstr="";
    if (global.lmb!="") then finalstr+="LMB: "+global.lmb;
    finalstr+="#";
    if (global.rmb!="") then finalstr+="RMB: "+global.rmb;
    draw_text_transformed_colour(10,display_get_gui_height()-7,finalstr,3,3,0,c_gray,c_gray,c_gray,c_gray,hudAlp-scrFade);
    draw_text_transformed_colour(10,display_get_gui_height()-10,finalstr,3,3,0,c_white,c_white,c_white,c_white,hudAlp-scrFade);
    draw_set_valign(fa_top);
}
texture_set_interpolation(1);
draw_set_blend_mode(bm_add);
repeat(3){
    draw_sprite_tiled_ext(sprNoise,irandom(2),irandom(room_width),irandom(room_height),1,1,c_white,.1);
}
if (background_exists(global.overlayBcg)){
    draw_background_ext(global.overlayBcg,0,0,1,1,0,c_white,.02);
}
draw_set_blend_mode(bm_normal);
texture_set_interpolation(0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var txtF="";
draw_background_part(bcgTiles0,280,120,40,80,360,0);
draw_set_font(global.gameFont);
if (global.interact || global.lmb="Examine..."){
    draw_set_valign(fa_middle);
    draw_set_halign(fa_center);
    draw_text_color_outline(objPlayer.x+2,objPlayer.y-100,"!",c_white,c_white,1,c_gray,c_gray,1,2,10,3,3,0);
    draw_set_valign(fa_top);
    draw_set_halign(fa_left);
}
draw_set_blend_mode(bm_subtract);
draw_surface(global.drkSur,0,0);
draw_set_blend_mode(bm_normal);
draw_set_alpha(scrFade);
draw_rectangle_colour(view_xview,view_yview,view_xview+display_get_gui_width(),view_yview+display_get_gui_height(),c_black,c_black,c_black,c_black,0);
draw_set_alpha(1);
if (global.txtPause==1){
    txtF=string_copy(txtStr[txtIndex],0,txtFade);
    draw_text_transformed_colour(view_xview+10,view_yview+12,txtF,3,3,0,c_gray,c_gray,c_gray,c_gray,1);
    draw_text_transformed_colour(view_xview+10,view_yview+10,txtF,3,3,0,c_white,c_white,c_white,c_white,1);
    if (round(txtFade)&gt;=string_length(txtStr[txtIndex])){
        draw_sprite_ext(sprArrow,0,view_xview+15,view_yview+22+45+45*string_count("#",txtStr[txtIndex])+sin(xx)*5+3,1,1,0,c_gray,1);
        draw_sprite(sprArrow,0,view_xview+15,view_yview+22+45+45*string_count("#",txtStr[txtIndex])+sin(xx)*5);
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
